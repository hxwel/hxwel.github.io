<!DOCTYPE html>

<html>
<head>
	<title>sb keyphraser</title>
	<style>
		body {
		font-family: Sans-serif;
		}

		.output {
		padding: 15px;
		float: left;
		}

		.input {
		float: left;
		}

		#form {
		padding: 15px;
		}

		.hidden {
		visibility: hidden;
		}
	</style>
</head>
<body>

	<div id="form">
		<form class="input" onsubmit="generate();return false" id="frm1">
			keyword: <input id="keyword" type="text"><br>
		</form> 
		<button class="input" onclick="generate();">generate</button>
		</br>
	</div>


	<div class="output hidden" id="generalButton">
		<strong>General Phrases</strong></br>
		<button onclick="copyPhrases('generalPhrases')">Copy to Clipboard</button>
		<div id="results"></div>
	</div>

	<div class="output hidden" id="gametimeButton">
		<strong>Gametime Phrases</strong></br>
		<button onclick="copyPhrases('gametimePhrases')">Copy to Clipboard</button>
		<div id="gametime"></div>
	</div>

	<textarea class="hidden" cols="30" value="" id="generalPhrases"></textarea>
	<textarea class="hidden" cols="30" value="" id="gametimePhrases"></textarea>

	<script>

		var prefixList = ["#", "2018", ""];
		var gamewordList = ["superbowl", "super bowl", "sb", "biggame", "big game"];
		var gameNumbers = ["52", "lii"];
		var identifierList = ["commercial", "ad"];
		var keywordList = [];
		var allStrings = [];

		
	function generate() {
		//gets input and adds possessive keyword to keywords array if it doesn't end in 's'
		//adds space after
		var keyword = document.getElementById("keyword").value;
		keywordList = ["</br>" + keyword + " "];

		if(keyword.slice(-1)!="s" && keyword.slice(-1)!="S"){
			keywordList.push("</br>" + keyword + "'s ");
			};
		
		//light the fuse starting with keywords
		allStrings = keywordList;
		allStrings = addPrefix();
		allStrings = addGamewords();
		
		
		//stores gametime array
		var gametimeStrings = allStrings;


		//finishes adding to allstrings for general phrases
		allStrings = addGamenumbers();
		allStrings = addIdentifiers();
		allStrings = variation();
		
		//converts to strings
		var finalResult = allStrings.toString();
		var gametimeResult = gametimeStrings.toString();
		
		//display strings on page
		document.getElementById("results").innerHTML = finalResult;
		document.getElementById("gametime").innerHTML = gametimeResult;
		
		//remove breaks and put strings in a text field for copying
		finalResult = finalResult.replace(/\<\/br\>/g,"");
		document.getElementById("generalPhrases").value = finalResult;
		
		gametimeResult = gametimeResult.replace(/\<\/br\>/g,"");
		document.getElementById("gametimePhrases").value = gametimeResult;
		
		//unhides copy button
		document.getElementById("generalButton").style.visibility = "visible";
		document.getElementById("gametimeButton").style.visibility = "visible";

	};


	//adds prefixes to keywords, returns new allstrings array
	//no space before //determines space after(no if hashtag or empty)
	function addPrefix(){
		var tempArray = [];
		var potentialSpace = "";
		
		for(var allIndex = 0; allIndex < allStrings.length; allIndex++){ 
			for (var i = 0; i < prefixList.length; i++){
				if(prefixList[i]!="#" && prefixList[i]!=""){
					potentialSpace=" ";
				}
				else {
					potentialSpace = "";
				};
				tempArray.push(allStrings[allIndex] + prefixList[i] + potentialSpace);
			};
		};
		return(tempArray);
	};


	//adds gamewords, returns new allstrings array
	//determines valid hashtag gamewords to use
	//does not add space after gamewords to allow further hashtag construction
	function addGamewords(){
		var tempArray = [];
		var potentialSpace = "";
		
		for(var allIndex = 0; allIndex < allStrings.length; allIndex++){ 
			for (var i = 0; i < gamewordList.length; i++){
				if(allStrings[allIndex].slice(-1)=="#" && (/\s/.test(gamewordList[i]))){
					continue;
				};
				tempArray.push(allStrings[allIndex] + gamewordList[i] + potentialSpace);
			};
		};
		return(tempArray);
	};


	//adds gamenumbers to lines w/o 2018 or 'big', returns new allstrings array
	//adds space before except when hashtag exists
	//does not add space after 
	function addGamenumbers(){
		var tempArray = [];
		var potentialSpace = "";
		
		for(var allIndex = 0; allIndex < allStrings.length; allIndex++){ 
			tempArray.push(allStrings[allIndex]);
			if(allStrings[allIndex].match(/big/)){
				continue;
			};
			if(allStrings[allIndex].match(/2018/)){
				continue;
			};
			for (var i = 0; i < gameNumbers.length; i++){
				if(allStrings[allIndex].match(/#/)){
					potentialSpace = "";
				}else{
					potentialSpace = " ";
				};	
				tempArray.push(allStrings[allIndex] + potentialSpace + gameNumbers[i]);
			};
		};
		return(tempArray);
	};


	//adds identifiers to allstrings, returns new allstrings array
	//adds space before
	function addIdentifiers(){
		var tempArray = [];
		
		for(var allIndex = 0; allIndex < allStrings.length; allIndex++){ 
			for (var i = 0; i < identifierList.length; i++){
				tempArray.push(allStrings[allIndex] + " " + identifierList[i]);
			};
		};
		return(tempArray);
	};


	//creates unique string variation: "honda commercial in the superbowl"
	function variation(){
		var savedAllStrings = allStrings;
		allStrings = keywordList;

		//removes space after keyword	
		for(var allIndex = 0; allIndex < allStrings.length; allIndex++){
			allStrings[allIndex] = allStrings[allIndex].replace(/.$/, "");
		};
		
		allStrings = addIdentifiers();
		
		for(var i = 0; i < allStrings.length; i++){
			allStrings[i] += " in the ";
		};
		allStrings = addGamewords();
		Array.prototype.push.apply(allStrings, savedAllStrings);
		return(allStrings);	
	};

	
	//copies phrases to clipboard
	function copyPhrases(element) {
		var copyStrings = document.getElementById(element);
		copyStrings.style.visibility = "visible";
		copyStrings.select();
		document.execCommand("Copy");
		copyStrings.style.visibility = "hidden";
		alert("Copied " + element);
	}

	</script>

</body>
</html>
